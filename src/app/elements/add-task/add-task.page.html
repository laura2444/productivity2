<ion-header class="custom-header">
  <ion-toolbar class="toolbar-custom">
    <ion-buttons slot="start">
      <ion-button (click)="closeModal()" class="close-button">
        <ion-icon name="close" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title class="custom-title">
      <span class="title-text">Crear Nueva Tarea</span>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding custom-content">
  <ion-card class="task-card">
    <ion-card-content>
      <!-- Campo de título -->
      <ion-item lines="none" class="custom-input">
        <ion-label position="floating" class="input-label">Título</ion-label>
        <ion-input [(ngModel)]="newTask.title" required class="input-field"></ion-input>
      </ion-item>

      <!-- Selector de Fecha -->
      <ion-item lines="none" button id="open-date-picker" class="custom-input date-time-item">
        <ion-icon name="calendar-outline" slot="start" class="picker-icon"></ion-icon>
        <ion-label class="input-label">Fecha</ion-label>
        <ion-text slot="end" class="selected-value">{{ formattedDate || 'Seleccionar' }}</ion-text>
      </ion-item>
      <ion-popover trigger="open-date-picker" class="custom-popover">
        <ng-template>
          <ion-datetime 
            [(ngModel)]="newTask.date" 
            (ionChange)="updateFormattedDate()" 
            presentation="date"
            class="custom-datetime">
          </ion-datetime>
        </ng-template>
      </ion-popover>

      <!-- Selector de Hora -->
      <ion-item lines="none" button id="open-time-picker" class="custom-input date-time-item">
        <ion-icon name="time-outline" slot="start" class="picker-icon"></ion-icon>
        <ion-label class="input-label">Hora</ion-label>
        <ion-text slot="end" class="selected-value">{{ formattedTime || 'Seleccionar' }}</ion-text>
      </ion-item>
      <ion-popover trigger="open-time-picker" class="custom-popover">
        <ng-template>
          <ion-datetime 
            [(ngModel)]="newTask.time" 
            (ionChange)="updateFormattedTime()" 
            presentation="time"
            class="custom-datetime">
          </ion-datetime>
        </ng-template>
      </ion-popover>

      <!-- Selector de Estado -->
      <ion-item lines="none" class="custom-input">
        <ion-icon name="flag-outline" slot="start" class="picker-icon"></ion-icon>
        <ion-label class="input-label">Estado</ion-label>
        <ion-select 
          [(ngModel)]="newTask.label" 
          interface="popover" 
          class="custom-select">
          <ion-select-option value="Trabajo">Sin Empezar</ion-select-option>
          <ion-select-option value="Progreso">En Progreso</ion-select-option>
          <ion-select-option value="Terminada">Terminada</ion-select-option>
        </ion-select>
      </ion-item>

      <!-- Campo de Descripción -->
      <ion-item lines="none" class="custom-input">
        <ion-label position="floating" class="input-label">Descripción</ion-label>
        <ion-textarea 
          [(ngModel)]="newTask.description" 
          rows="4"
          class="input-field">
        </ion-textarea>
      </ion-item>

      <!-- Botón de Crear -->
      <ion-button expand="block" class="btn-crear" (click)="addTask()">
        <ion-icon name="checkmark-circle" slot="start"></ion-icon>
        Crear Tarea
      </ion-button>
    </ion-card-content>
  </ion-card>
</ion-content>